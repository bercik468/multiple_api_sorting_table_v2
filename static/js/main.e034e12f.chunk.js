(this.webpackJsonpmultiple_api_sorting_table_v2=this.webpackJsonpmultiple_api_sorting_table_v2||[]).push([[0],{122:function(e,t,a){e.exports=a(224)},224:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),i=a.n(r),l=a(97),c=a(98),s=a(110),m=a(99),u=a(111),d=a(251),p=a(254),f=a(255),g=a(256),h=a(102),y=a.n(h),b=Object(d.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(5),right:e.spacing(5),zIndex:1},icon:{"&:hover":{color:"gold"}}}})),E=function(){var e=b(),t=Object(p.a)({disableHysteresis:!0,threshold:100});return o.a.createElement(f.a,{in:t},o.a.createElement("div",{className:e.root},o.a.createElement(g.a,{size:"small",color:"primary",onClick:function(e){return function(e){e.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"})}(e)}},o.a.createElement(y.a,{className:e.icon}))))},v=a(258),D=Object(d.a)({loadingCircle:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(102,102,102,0.8)",zIndex:2e3}}),w=function(){var e=D();return o.a.createElement("div",{className:e.loadingCircle},o.a.createElement(v.a,{size:120}))},C=a(103),F=a(278),I=a(113),k=Object(d.a)((function(e){return{root:Object(C.a)({},e.flexCenter,{position:"relative",marginTop:30,marginBottom:30}),title:{marginTop:30}}})),O=function(e){var t=k();return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{className:t.title,align:"center",variant:"h4"},"Multiple API sorting table"),o.a.createElement("div",{className:t.root},o.a.createElement(F.a,{value:e.nameFilter,onChange:e.setNameFilter,variant:"outlined",label:"enter company name",FormHelperTextProps:{style:{position:"absolute",top:55}}})))},j=a(262),S=Object(d.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},button:{marginTop:20,"&:hover":{color:"gold"}}}})),x=function(e){var t=S();return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:t.container,noValidate:!0},o.a.createElement(F.a,{id:"dateFrom",label:"Date from",type:"date",value:e.date.newDateFrom,className:t.textField,InputLabelProps:{shrink:!0},onChange:e.date.setDateFrom}),o.a.createElement(F.a,{id:"dateTo",label:"Date to",type:"date",value:e.date.newDateTo,className:t.textField,InputLabelProps:{shrink:!0},onChange:e.date.setDateTo})),o.a.createElement(j.a,{className:t.button,onClick:e.onChangeDate,color:"primary",variant:"contained"},"Set date"))},N=a(106),T=function(e){return o.a.createElement("div",{className:"chart"},e.chartData.open&&o.a.createElement(N.a,{data:e.chartData.dataOpen,options:{title:{display:e.displayTitle,text:e.chartData.dataOpen.name,fontSize:25},legend:{display:e.displayLegend,position:e.legendPosition}}}))},M=a(108),P=a.n(M),A=a(263),L=a(279),z=a(264),_=a(265),R=a(266),B=a(267),U=o.a.forwardRef((function(e,t){return o.a.createElement(A.a,Object.assign({direction:"up",ref:t},e))})),W=Object(d.a)((function(e){return{closeButton:{position:"absolute",right:0,top:0,pading:8,color:e.palette.grey[500]},dialog:{zIndex:3e3}}}));function H(e){var t=W(),a=e.dataOpen,n=a.id,r=a.name,i=a.city,l=a.incomes,c=a.allIncomes,s=e.newIncomes,m=e.newAllIncomes,u=e.whatIncomes;return o.a.createElement("div",{className:t.dialog},o.a.createElement(L.a,{className:t.dialog,open:e.open,TransitionComponent:U,keepMounted:!0,PaperProps:{style:{width:"100vw",height:"100vh"}}},o.a.createElement(z.a,{id:"customized-dialog-title"},"Company details"),o.a.createElement(_.a,{"aria-label":"close",className:t.closeButton,onClick:e.toggleDetails},o.a.createElement(P.a,null)),o.a.createElement(R.a,null,o.a.createElement(B.a,null,"ID: ".concat(n)),o.a.createElement(B.a,null,"NAME: ".concat(r)),o.a.createElement(B.a,null,"CITY: ".concat(i)),o.a.createElement(B.a,null,"Total incomes: ".concat(0===u?c:m)),o.a.createElement(B.a,null,"Average income: ".concat(0===u?"object"===typeof l&&(c/l.length).toFixed(2):s>0?(m/s).toFixed(2):"0.00")),o.a.createElement(B.a,null,"Last month income: ".concat(function(){if("object"===typeof l)return l.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})),l.filter((function(e){return l[0].date.substring(0,7)===e.date.substring(0,7)})).map((function(e){return parseFloat(e.value)})).reduce((function(e,t){return e+t}),0).toFixed(2)}())),o.a.createElement(x,{date:e,onChangeDate:e.onChangeDate}),o.a.createElement(T,{chartData:e,location:"Income",legendPosition:"bottom",displayTitle:!0,displayLegend:!0}))))}var J=a(74),Y=a(19),V=a(4),q=a(268),G=a(269),K=a(261),Q=a(270),X=a(271),Z=a(272),$=a(273),ee=a(276),te=Object(V.a)((function(e){var t,a;return{head:(t={backgroundColor:e.palette.common.black,color:e.palette.common.white,fontSize:10,paddingLeft:8,paddingRight:8},Object(Y.a)(t,e.breakpoints.up(400),{fontSize:14}),Object(Y.a)(t,e.breakpoints.up("md"),{fontSize:20}),t),body:(a={fontSize:10,paddingLeft:8,paddingRight:8},Object(Y.a)(a,e.breakpoints.up(400),{fontSize:14}),Object(Y.a)(a,e.breakpoints.up("md"),{fontSize:16}),a)}}))(q.a),ae=Object(V.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(G.a),ne=Object(d.a)((function(e){return{table:{minWidth:100},name:Object(Y.a)({textDecoration:"underline"},e.breakpoints.up("md"),{cursor:"pointer","&:hover":{color:"#FFDA2F",textShadow:"1px 1px gray"}}),container:Object(Y.a)({},e.breakpoints.up("md"),{maxWidth:1200,margin:"0 auto"}),type:Object(Y.a)({},e.breakpoints.up("md"),{cursor:"pointer","&:hover":{textDecoration:"underline",color:"gold"}})}}));function oe(e){var t=ne(),a=o.a.useState(0),n=Object(J.a)(a,2),r=n[0],i=n[1],l=o.a.useState(10),c=Object(J.a)(l,2),s=c[0],m=c[1];return o.a.createElement(K.a,{className:t.container},o.a.createElement(Q.a,{component:K.a},o.a.createElement(X.a,{"aria-label":""},o.a.createElement(Z.a,{className:t.table},o.a.createElement(G.a,null,o.a.createElement(te,{align:"center",onClick:function(t){return e.handleClickSort(t,"id")},className:t.type},"ID"),o.a.createElement(te,{align:"center",onClick:function(t){return e.handleClickSort(t,"name")},className:t.type},"NAME"),o.a.createElement(te,{align:"center",onClick:function(t){return e.handleClickSort(t,"city")},className:t.type},"CITY"),o.a.createElement(te,{align:"center",onClick:function(t){return e.handleClickSort(t,"total")},className:t.type},"TOTAL INCOME"))),o.a.createElement($.a,null,e.data.slice(r*s,r*s+s).map((function(a){return o.a.createElement(ae,{key:a.id},o.a.createElement(te,{align:"center"},a.id),o.a.createElement(te,{className:t.name,onClick:function(t){return e.openDetails(t,a)},align:"center"},a.name),o.a.createElement(te,{align:"center"},a.city),o.a.createElement(te,{align:"center"},a.allIncomes))}))))),o.a.createElement(ee.a,{rowsPerPageOptions:[10,25,100],component:"div",labelRowsPerPage:"",count:e.data.length,rowsPerPage:s,page:r,onChangePage:function(e,t){i(t)},onChangeRowsPerPage:function(e){m(+e.target.value),i(0)}}))}var re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],sort:0,dataFilter:[],dataOpen:[],isLoading:!0,isError:!1,nameInput:"",open:!1,newDateFrom:"yyyy-MM-dd",newDateTo:"yyyy-MM-dd",newIncomes:"",newAllIncomes:"",whatIncomes:0},a.handleClickSort=function(e,t){0===a.state.sort?(a.setState({sort:1}),a.sortArrayUp(a.state.dataFilter,t)):1===a.state.sort?(a.setState({sort:2}),a.sortArrayDown(a.state.dataFilter,t)):2===a.state.sort&&(a.setState({sort:1}),a.sortArrayUp(a.state.dataFilter,t))},a.sortArrayUp=function(e,t){return"id"===t?(e.sort((function(e,t){return e.id-t.id})),e):"name"===t?(e.sort((function(e,t){return e.name.localeCompare(t.name)})),e):"city"===t?(e.sort((function(e,t){return e.city.localeCompare(t.city)})),e):"total"===t?(e.sort((function(e,t){return e.allIncomes-t.allIncomes})),e):void 0},a.sortArrayDown=function(e,t){return"id"===t?(e.sort((function(e,t){return t.id-e.id})),e):"name"===t?(e.sort((function(e,t){return t.name.localeCompare(e.name)})),e):"city"===t?(e.sort((function(e,t){return t.city.localeCompare(e.city)})),e):"total"===t?(e.sort((function(e,t){return t.allIncomes-e.allIncomes})),e):void 0},a.setNameFilter=function(e){var t=e.target.value,n=a.state.data.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));a.setState({nameInput:t,dataFilter:n}),console.log(n)},a.setDateFrom=function(e){var t=e.target.value;a.setState({newDateFrom:t})},a.setDateTo=function(e){var t=e.target.value;a.setState({newDateTo:t})},a.openDetails=function(e,t){a.setState({open:!0,dataOpen:t})},a.closeDetails=function(e){a.setState({open:!1,whatIncomes:0,newDateFrom:"yyyy-MM-dd",newDateTo:"yyyy-MM-dd"})},a.filterDateMonths=function(e){var t=a.state,n=t.dataOpen,o=t.newDateFrom,r=t.newDateTo;if("object"===typeof n&"yyyy-MM-dd"!==o&"yyyy-MM-dd"!==r){var i=n.incomes.filter((function(e){return e.date.substring(0,10)>=o.substring(0,10)&e.date.substring(0,10)<=r.substring(0,10)})),l=i.map((function(e){return parseFloat(e.value)})).reduce((function(e,t){return e+t}),0).toFixed(2);a.setState({newIncomes:i.length,newAllIncomes:l,whatIncomes:1})}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];fetch("https://recruitment.hal.skygate.io/companies").then((function(e){return e.json()})).then((function(a){a.map((function(n){return fetch("https://recruitment.hal.skygate.io/incomes/".concat(n.id)).then((function(e){return e.json()})).then((function(o){if(n.id===o.id){var r=n,i=o,l={allIncomes:i.incomes.map((function(e){return parseFloat(e.value)})).reduce((function(e,t){return e+t}),0).toFixed(2)};i.incomes.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)}));var c={labels:i.incomes.map((function(e){return e.date.substring(0,10)})),datasets:[{label:"Income",data:i.incomes.map((function(e){return e.value})),backgroundColor:i.incomes.map((function(e){return"#".concat(Math.floor(16777215*Math.random()).toString(16))}))}]},s=Object.assign(r,i,l,c);t.push(s)}t.length===a.length&&(t.sort((function(e,t){return t.allIncomes-e.allIncomes})),e.setState({data:t,dataFilter:t,isLoading:!1}))}))}))})).catch((function(){return e.setState({isError:!0,isLoading:!1})}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.isLoading&&o.a.createElement(w,null),o.a.createElement(O,{setNameFilter:this.setNameFilter,nameFilter:this.state.nameFilter}),o.a.createElement(oe,{data:this.state.dataFilter,openDetails:this.openDetails,handleClickSort:this.handleClickSort}),o.a.createElement(H,{open:this.state.open,toggleDetails:this.closeDetails,dataOpen:this.state.dataOpen,setDateFrom:this.setDateFrom,newDateFrom:this.state.newDateFrom,setDateTo:this.setDateTo,newDateTo:this.state.newDateTo,newIncomes:this.state.newIncomes,newAllIncomes:this.state.newAllIncomes,whatIncomes:this.state.whatIncomes,onChangeDate:this.filterDateMonths}),o.a.createElement(E,null),this.state.isError&&o.a.createElement(I.a,{variant:"h5",color:"error",align:"center"},"Error 404 data not found"))}}]),t}(n.Component),ie=a(109),le=Object(ie.a)({palette:{primary:{main:"#000000"},secondary:{main:"#009900"}},absCenterDiv:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},flexCenter:{display:"flex",justifyContent:"center",alignItems:"center"}}),ce=a(274);i.a.render(o.a.createElement(ce.a,{theme:le},o.a.createElement(re,null)),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.e034e12f.chunk.js.map